<UserControl
    x:Class="Nagi.WinUI.Controls.MiniPlayerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid x:Name="HoverDetector" Background="Transparent">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="HoverStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.2"/>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Normal">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="HoverControlsContainer"
                                       Storyboard.TargetProperty="Opacity"
                                       To="0"
                                       Duration="0"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="MouseOver">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="HoverControlsContainer"
                                       Storyboard.TargetProperty="Opacity"
                                       To="1"
                                       Duration="0"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Border Background="{StaticResource AppPrimaryColorBrush}">
            <Grid>
                <Border x:Name="DragHandle" Background="Transparent"/>

                <StackPanel
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Spacing="10"
                    IsHitTestVisible="False">
                    <TextBlock
                        Text="Mini Player"
                        Foreground="White"
                        HorizontalAlignment="Center"
                        Style="{ThemeResource SubtitleTextBlockStyle}"/>
                    <TextBlock
                        Text="{x:Bind ViewModel.CurrentPlayingTrack.Title, FallbackValue='No Song Playing'}"
                        Foreground="White"
                        HorizontalAlignment="Center"
                        TextWrapping="Wrap"
                        TextAlignment="Center"
                        Style="{ThemeResource CaptionTextBlockStyle}"/>
                </StackPanel>

                <Grid x:Name="HoverControlsContainer" Opacity="0">
                    <Border Background="#80000000" IsHitTestVisible="False"/>
                    <Button
                        x:Name="RestoreButton"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Width="48"
                        Height="48"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        ToolTipService.ToolTip="Show Nagi">
                        <FontIcon
                            FontFamily="{ThemeResource SymbolThemeFontFamily}"
                            Glyph="&#xE740;"
                            FontSize="18"
                            Foreground="White"/>
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>